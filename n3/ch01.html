<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>N3 ë‹¨ì–´ì¥ Ch.1</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 0; padding: 0; background: #1a1a2e; color: #eee; min-height: 100vh; }
        .container { max-width: 500px; margin: 0 auto; padding: 12px; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap; gap: 8px; }
        h1 { font-size: 1.3rem; margin: 0; color: #fff; }
        .progress { font-size: 0.9rem; color: #888; }
        .controls { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; justify-content: center; }
        .toggle-btn { padding: 8px 14px; border: none; border-radius: 20px; font-size: 0.85rem; cursor: pointer; transition: all 0.2s; }
        .toggle-btn.active { background: #4a5568; color: #fff; }
        .toggle-btn.inactive { background: #2d3748; color: #718096; }
        .toggle-btn.shuffle { background: #805ad5; color: #fff; }
        .toggle-btn.reset { background: #dd6b20; color: #fff; }
        .category-select { width: 100%; padding: 10px; border: none; border-radius: 10px; background: #2d3748; color: #fff; font-size: 0.95rem; margin-bottom: 12px; }
        .card { background: linear-gradient(145deg, #16213e, #1a1a2e); border-radius: 16px; padding: 28px 20px; min-height: 280px; display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: 0 8px 32px rgba(0,0,0,0.3); margin-bottom: 16px; border: 1px solid #2d3748; }
        .kanji { font-family: 'Noto Sans JP', sans-serif; font-size: 3rem; font-weight: bold; color: #fff; margin-bottom: 16px; text-align: center; line-height: 1.3; }
        .reading { font-family: 'Noto Sans JP', sans-serif; font-size: 1.4rem; color: #63b3ed; margin-bottom: 20px; text-align: center; }
        .meaning { font-size: 1.5rem; color: #68d391; text-align: center; padding: 12px 20px; background: rgba(104, 211, 145, 0.1); border-radius: 10px; }
        .hidden { visibility: hidden; }
        .nav-buttons { display: flex; gap: 12px; justify-content: center; }
        .nav-btn { flex: 1; max-width: 150px; padding: 14px 20px; border: none; border-radius: 12px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .nav-btn.prev { background: #4a5568; color: #fff; }
        .nav-btn.next { background: #4299e1; color: #fff; }
        .nav-btn:active { transform: scale(0.96); }
        .category-tag { font-size: 0.75rem; padding: 4px 10px; background: #4a5568; border-radius: 12px; margin-bottom: 16px; color: #a0aec0; }
        .tap-hint { text-align: center; font-size: 0.8rem; color: #555; margin-top: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../index.html#modal-n3" style="padding:6px 12px;background:#38a169;color:#fff;text-decoration:none;border-radius:8px;font-size:0.85rem;">â† í™ˆ</a>
            <h1>N3 ë‹¨ì–´ì¥ Ch.1</h1>
            <span class="progress" id="progress">1 / 100</span>
        </header>
        <select class="category-select" id="categorySelect" onchange="changeCategory()">
            <option value="all">ì „ì²´</option>
            <option value="ìŒë…ëª…ì‚¬">ìŒë… ëª…ì‚¬</option>
            <option value="í›ˆë…ëª…ì‚¬">í›ˆë… ëª…ì‚¬</option>
            <option value="ë™ì‚¬">ë™ì‚¬</option>
            <option value="ã„í˜•ìš©ì‚¬">ã„í˜•ìš©ì‚¬</option>
            <option value="ãªí˜•ìš©ì‚¬">ãªí˜•ìš©ì‚¬</option>
            <option value="ë¶€ì‚¬">ë¶€ì‚¬ ë° ê¸°íƒ€</option>
            <option value="ê°€íƒ€ì¹´ë‚˜">ê°€íƒ€ì¹´ë‚˜ì–´</option>
        </select>
        <div class="card" id="card">
            <span class="category-tag" id="categoryTag">ëª…ì‚¬</span>
            <div class="kanji" id="kanji">æ¼¢å­—</div>
            <div class="reading" id="reading">ã‹ã‚“ã˜</div>
            <div class="meaning" id="meaning">í•œì</div>
        </div>
        <div class="controls">
            <button class="toggle-btn reset" onclick="resetOrder()">â†º ì´ˆê¸°í™”</button>
            <button class="toggle-btn shuffle" onclick="shuffleCards()">ğŸ”€ ì…”í”Œ</button>
            <button class="toggle-btn active" id="toggleReading" onclick="toggleReading()">ë°œìŒ í‘œì‹œ</button>
            <button class="toggle-btn active" id="toggleMeaning" onclick="toggleMeaning()">ì •ë‹µ í‘œì‹œ</button>
        </div>
        <div class="nav-buttons">
            <button class="nav-btn prev" onclick="prevCard()">â—€ ì´ì „</button>
            <button class="nav-btn next" onclick="nextCard()">ë‹¤ìŒ â–¶</button>
        </div>
        <p class="tap-hint">ì¹´ë“œë¥¼ ê¸¸ê²Œ ëˆ„ë¥´ë©´ ì •ë‹µ í‘œì‹œ</p>
    </div>
    <script>
        const STORAGE_KEY = 'n3_ch01_state';
        const words = [
            // ìŒë… ëª…ì‚¬
            {kanji: "å®‰å¿ƒ", reading: "ã‚ã‚“ã—ã‚“", meaning: "ì•ˆì‹¬", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å®‰å®š", reading: "ã‚ã‚“ã¦ã„", meaning: "ì•ˆì •", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ¡ˆå†…", reading: "ã‚ã‚“ãªã„", meaning: "ì•ˆë‚´", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä»¥ä¸‹", reading: "ã„ã‹", meaning: "ì´í•˜", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä»¥å¤–", reading: "ã„ãŒã„", meaning: "ì´ì™¸", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "åŒ»å­¦", reading: "ã„ãŒã", meaning: "ì˜í•™", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ„è¦‹", reading: "ã„ã‘ã‚“", meaning: "ì˜ê²¬", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä»¥å¾Œ", reading: "ã„ã”", meaning: "ì´í›„(ë‚˜ì¤‘)", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä»¥é™", reading: "ã„ã“ã†", meaning: "ì´í›„(since)", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ„å¿—", reading: "ã„ã—", meaning: "ì˜ì§€", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ„è­˜", reading: "ã„ã—ã", meaning: "ì˜ì‹", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "åŒ»è€…", reading: "ã„ã—ã‚ƒ", meaning: "ì˜ì‚¬", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä»¥ä¸Š", reading: "ã„ã˜ã‚‡ã†", meaning: "ì´ìƒ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ¤…å­", reading: "ã„ã™", meaning: "ì˜ì", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä»¥å‰", reading: "ã„ãœã‚“", meaning: "ì´ì „", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä½ç½®", reading: "ã„ã¡", meaning: "ìœ„ì¹˜", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä¸€æ—¥", reading: "ã„ã¡ã«ã¡", meaning: "í•˜ë£¨", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä¸€é€±é–“", reading: "ã„ã£ã—ã‚…ã†ã‹ã‚“", meaning: "ì¼ì£¼ì¼", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä¸€ç·’", reading: "ã„ã£ã—ã‚‡", meaning: "ê°™ìŒ, í•¨ê»˜í•¨", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä¸€æ¯", reading: "ã„ã£ã±ã„", meaning: "í•œ ì”", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ç§»è»¢", reading: "ã„ã¦ã‚“", meaning: "ì´ì „", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä»¥å†…", reading: "ã„ãªã„", meaning: "ì´ë‚´", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ„å‘³", reading: "ã„ã¿", meaning: "ì˜ë¯¸", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å°è±¡", reading: "ã„ã‚“ã—ã‚‡ã†", meaning: "ì¸ìƒ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å³æŠ˜", reading: "ã†ã›ã¤", meaning: "ìš°íšŒì „", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å·¦æŠ˜", reading: "ã•ã›ã¤", meaning: "ì¢ŒíšŒì „", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é‹è»¢", reading: "ã†ã‚“ã¦ã‚“", meaning: "ìš´ì „", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é‹å‹•", reading: "ã†ã‚“ã©ã†", meaning: "ìš´ë™", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ˜ ç”»", reading: "ãˆã„ãŒ", meaning: "ì˜í™”", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è‹±èª", reading: "ãˆã„ã”", meaning: "ì˜ì–´", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ „é¤Š", reading: "ãˆã„ã‚ˆã†", meaning: "ì˜ì–‘", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é§…", reading: "ãˆã", meaning: "ì—­", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å»¶æœŸ", reading: "ãˆã‚“ã", meaning: "ì—°ê¸°", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ¼”å¥", reading: "ãˆã‚“ãã†", meaning: "ì—°ì£¼", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é‰›ç­†", reading: "ãˆã‚“ã´ã¤", meaning: "ì—°í•„", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é æ…®", reading: "ãˆã‚“ã‚Šã‚‡", meaning: "ì‚¬ì–‘, ì‚¼ê°", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ¨ªæ–­", reading: "ãŠã†ã ã‚“", meaning: "íš¡ë‹¨", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å¿œå‹Ÿ", reading: "ãŠã†ã¼", meaning: "ì‘ëª¨", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å¿œç”¨", reading: "ãŠã†ã‚ˆã†", meaning: "ì‘ìš©", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ãŠè“å­", reading: "ãŠã‹ã—", meaning: "ê³¼ì", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å±‹ä¸Š", reading: "ãŠãã˜ã‚‡ã†", meaning: "ì˜¥ìƒ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å†…å´", reading: "ã†ã¡ãŒã‚", meaning: "ì•ˆìª½", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è…•", reading: "ã†ã§", meaning: "íŒ”, ì—­ëŸ‰, ì†œì”¨", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å£²ã‚Šå ´", reading: "ã†ã‚Šã°", meaning: "ë§¤ì¥", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä¸Šç€", reading: "ã†ã‚ã", meaning: "ìƒì˜", category: "ìŒë…ëª…ì‚¬"},
            
            // í›ˆë… ëª…ì‚¬
            {kanji: "åˆå›³", reading: "ã‚ã„ãš", meaning: "ì‹ í˜¸", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "é–“", reading: "ã‚ã„ã ", meaning: "ì‚¬ì´, ë™ì•ˆ", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "ç›¸æ‰‹", reading: "ã‚ã„ã¦", meaning: "ìƒëŒ€", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "èµ¤ã‚“åŠ", reading: "ã‚ã‹ã‚“ã¼ã†", meaning: "ì•„ê¸°", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "æœ", reading: "ã‚ã•", meaning: "ì•„ì¹¨", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å‘³", reading: "ã‚ã˜", meaning: "ë§›", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "æ±—", reading: "ã‚ã›", meaning: "ë•€", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "é ­", reading: "ã‚ãŸã¾", meaning: "ë¨¸ë¦¬", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "è¾ºã‚Š", reading: "ã‚ãŸã‚Š", meaning: "ì£¼ìœ„, ì£¼ë³€, ì¦ˆìŒ", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å¾Œ", reading: "ã‚ã¨", meaning: "ë’¤, í›„(ì‹œê°„)", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "ç©´", reading: "ã‚ãª", meaning: "êµ¬ë©", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å…„", reading: "ã‚ã«", meaning: "í˜•, ì˜¤ë¹ ", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å§‰", reading: "ã‚ã­", meaning: "ëˆ„ë‚˜, ì–¸ë‹ˆ", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "æ²¹", reading: "ã‚ã¶ã‚‰", meaning: "ê¸°ë¦„", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "é£´", reading: "ã‚ã‚", meaning: "ì‚¬íƒ•", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "æ¯", reading: "ã„ã", meaning: "ìˆ¨", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "æ± ", reading: "ã„ã‘", meaning: "ì—°ëª»", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "ä»Šã”ã‚", reading: "ã„ã¾ã”ã‚", meaning: "ì§€ê¸ˆì¯¤, ì´ë§˜ë•Œ", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å¦¹", reading: "ã„ã‚‚ã†ã¨", meaning: "ì—¬ë™ìƒ", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å…¥ã‚Šå£", reading: "ã„ã‚Šãã¡", meaning: "ì…êµ¬", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å²©", reading: "ã„ã‚", meaning: "ë°”ìœ„", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å—ä»˜", reading: "ã†ã‘ã¤ã‘", meaning: "ì ‘ìˆ˜", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å¾Œã‚", reading: "ã†ã—ã‚", meaning: "ë’¤, ë’¤ìª½", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å˜˜", reading: "ã†ã", meaning: "ê±°ì§“ë§", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "ã†ã‚ã•", reading: "ã†ã‚ã•", meaning: "ì†Œë¬¸", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "çµµ", reading: "ãˆ", meaning: "ê·¸ë¦¼", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "ç¬‘é¡”", reading: "ãˆãŒãŠ", meaning: "ì›ƒëŠ” ì–¼êµ´", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "æ", reading: "ãˆã ", meaning: "ê°€ì§€", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "ãŠç¥ã„", reading: "ãŠã„ã‚ã„", meaning: "ì¶•í•˜, ì¶•í•˜ ì„ ë¬¼", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å¥¥ã•ã‚“", reading: "ãŠãã•ã‚“", meaning: "ë¶€ì¸, ì•„ì£¼ë¨¸ë‹ˆ", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "è´ˆã‚Šç‰©", reading: "ãŠãã‚Šã‚‚ã®", meaning: "ì„ ë¬¼", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "ç¥ã†", reading: "ã„ã‚ã†", meaning: "ì¶•í•˜í•˜ë‹¤", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "è´ˆã‚‹", reading: "ãŠãã‚‹", meaning: "ë³´ë‚´ë‹¤, ì„ ë¬¼í•˜ë‹¤", category: "í›ˆë…ëª…ì‚¬"},
            
            // ë™ì‚¬
            {kanji: "ä¼šã†", reading: "ã‚ã†", meaning: "ë§Œë‚˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "åˆã†", reading: "ã‚ã†", meaning: "ë§ë‹¤, ì í•©í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ä¸ŠãŒã‚‹", reading: "ã‚ãŒã‚‹", meaning: "ì˜¤ë¥´ë‹¤, ì˜¬ë¼ê°€ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ä¸Šã’ã‚‹", reading: "ã‚ã’ã‚‹", meaning: "ì˜¬ë¦¬ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ã‚ãã‚‹", reading: "ã‚ãã‚‹", meaning: "ì§ˆë¦¬ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ã‚ãã‚Œã‚‹", reading: "ã‚ãã‚Œã‚‹", meaning: "ê¸°ê°€ ë§‰íˆë‹¤, ì§ˆë¦¬ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ç©ºã", reading: "ã‚ã", meaning: "ë¹„ë‹¤, ë¹ˆí‹ˆì´ ìƒê¸°ë‹¤", category: "ë™ì‚¬"},
            {kanji: "é–‹ã", reading: "ã‚ã", meaning: "ì—´ë¦¬ë‹¤", category: "ë™ì‚¬"},
            {kanji: "é–‹ã‘ã‚‹", reading: "ã‚ã‘ã‚‹", meaning: "ì—´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ˜ã‘ã‚‹", reading: "ã‚ã‘ã‚‹", meaning: "(ê¸°ê°„ì´) ëë‚˜ë‹¤, ì§€ë‚˜ê°€ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ†§ã‚Œã‚‹", reading: "ã‚ã“ãŒã‚Œã‚‹", meaning: "ë™ê²½í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å‘³ã‚ã†", reading: "ã‚ã˜ã‚ã†", meaning: "ë§›ë³´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "é ã‘ã‚‹", reading: "ã‚ãšã‘ã‚‹", meaning: "ë§¡ê¸°ë‹¤, ë³´ê´€ì‹œí‚¤ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ä¸ãˆã‚‹", reading: "ã‚ãŸãˆã‚‹", meaning: "ì£¼ë‹¤, ë¶€ì—¬í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ¸©ã‚ã‚‹", reading: "ã‚ãŸãŸã‚ã‚‹", meaning: "ë°ìš°ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å½“ãŸã‚‹", reading: "ã‚ãŸã‚‹", meaning: "ë§ë‹¤, í•´ë‹¹í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "é›†ã¾ã‚‹", reading: "ã‚ã¤ã¾ã‚‹", meaning: "ëª¨ì´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "é›†ã‚ã‚‹", reading: "ã‚ã¤ã‚ã‚‹", meaning: "ëª¨ìœ¼ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æµ´ã³ã‚‹", reading: "ã‚ã³ã‚‹", meaning: "ë¼ì–¹ë‹¤, ì¬ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æº¢ã‚Œã‚‹", reading: "ã‚ãµã‚Œã‚‹", meaning: "ë„˜ì¹˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ã‚ã¾ã‚‹", reading: "ã‚ã¾ã‚‹", meaning: "ë‚¨ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ç·¨ã‚€", reading: "ã‚ã‚€", meaning: "ì—®ë‹¤, ëœ¨ë‹¤", category: "ë™ì‚¬"},
            {kanji: "è¬ã‚‹", reading: "ã‚ã‚„ã¾ã‚‹", meaning: "ì‚¬ê³¼í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ´—ã†", reading: "ã‚ã‚‰ã†", meaning: "ì”»ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ”¹ã‚ã‚‹", reading: "ã‚ã‚‰ãŸã‚ã‚‹", meaning: "ê³ ì¹˜ë‹¤, ê°œì„ í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "è¡¨ã™", reading: "ã‚ã‚‰ã‚ã™", meaning: "ë‚˜íƒ€ë‚´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ­©ã", reading: "ã‚ã‚‹ã", meaning: "ê±·ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ç”Ÿãã‚‹", reading: "ã„ãã‚‹", meaning: "ì‚´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ã„ã˜ã‚ã‚‹", reading: "ã„ã˜ã‚ã‚‹", meaning: "ê´´ë¡­íˆë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ€¥ã", reading: "ã„ãã", meaning: "ì„œë‘ë¥´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ç—›ãŒã‚‹", reading: "ã„ãŸãŒã‚‹", meaning: "ì‚½ì•„íŒŒí•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ç¥ˆã‚‹", reading: "ã„ã®ã‚‹", meaning: "ê¸°ë„í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å±…ã‚‹", reading: "ã„ã‚‹", meaning: "ìˆë‹¤, ì¡´ì¬í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "è¦ã‚‹", reading: "ã„ã‚‹", meaning: "í•„ìš”í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å…¥ã‚Œã‚‹", reading: "ã„ã‚Œã‚‹", meaning: "ë„£ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ç¥ã†", reading: "ã„ã‚ã†", meaning: "ì¶•í•˜í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ¤ãˆã‚‹", reading: "ã†ãˆã‚‹", meaning: "ì‹¬ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å—ã‘ã‚‹", reading: "ã†ã‘ã‚‹", meaning: "ë°›ë‹¤", category: "ë™ì‚¬"},
            {kanji: "è¾¼ã‚€", reading: "ã“ã‚€", meaning: "ë¶ë¹„ë‹¤, ë¼ì›Œë„£ë‹¤", category: "ë™ì‚¬"},
            
            // ã„í˜•ìš©ì‚¬
            {kanji: "é’ã„", reading: "ã‚ãŠã„", meaning: "íŒŒë—ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "èµ¤ã„", reading: "ã‚ã‹ã„", meaning: "ë¹¨ê°›ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æ˜ã‚‹ã„", reading: "ã‚ã‹ã‚‹ã„", meaning: "ë°ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æµ…ã„", reading: "ã‚ã•ã„", meaning: "ì–•ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æš–ã‹ã„", reading: "ã‚ãŸãŸã‹ã„", meaning: "(ê¸°ì˜¨ì´) ë”°ëœ»í•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æ¸©ã‹ã„", reading: "ã‚ãŸãŸã‹ã„", meaning: "(ì˜¨ë„ê°€) ë”°ëœ»í•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æ–°ã—ã„", reading: "ã‚ãŸã‚‰ã—ã„", meaning: "ìƒˆë¡­ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "å¤ã„", reading: "ãµã‚‹ã„", meaning: "ë‚¡ë‹¤, ì˜¤ë˜ë˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æš‘ã„", reading: "ã‚ã¤ã„", meaning: "ë¥ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "ç†±ã„", reading: "ã‚ã¤ã„", meaning: "ëœ¨ê²ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "åšã„", reading: "ã‚ã¤ã„", meaning: "ë‘ê»ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "åšã‹ã¾ã—ã„", reading: "ã‚ã¤ã‹ã¾ã—ã„", meaning: "ë»”ë»”í•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            
            // ãªí˜•ìš©ì‚¬
            {kanji: "æ˜ã‚‰ã‹ã ", reading: "ã‚ãã‚‰ã‹ã ", meaning: "ë¶„ëª…í•˜ë‹¤, ëª…ë°±í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "æ–°ãŸã ", reading: "ã‚ã‚‰ãŸã ", meaning: "ìƒˆë¡­ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "å®‰å…¨ã ", reading: "ã‚ã‚“ãœã‚“ã ", meaning: "ì•ˆì „í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "æ„å¤–ã ", reading: "ã„ãŒã„ã ", meaning: "ì˜ì™¸ì´ë‹¤, ëœ»ë°–ì´ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "å‰å¤§ã ", reading: "ã„ã ã„ã ", meaning: "ìœ„ëŒ€í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "ä¸€ç”Ÿæ‡¸å‘½ã ", reading: "ã„ã£ã—ã‚‡ã†ã‘ã‚“ã‚ã„ã ", meaning: "ì—´ì‹¬ì´ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "ä¸€èˆ¬çš„ã ", reading: "ã„ã£ã±ã‚“ã¦ãã ", meaning: "ì¼ë°˜ì ì´ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "å«Œã ", reading: "ã„ã‚„ã ", meaning: "ì‹«ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            
            // ë¶€ì‚¬ ë° ê¸°íƒ€
            {kanji: "ç›¸å¤‰ã‚ã‚‰ãš", reading: "ã‚ã„ã‹ã‚ã‚‰ãš", meaning: "ì—¬ì „íˆ, ë³€í•¨ì—†ì´", category: "ë¶€ì‚¬"},
            {kanji: "ã‚ã£ã•ã‚Š", reading: "ã‚ã£ã•ã‚Š", meaning: "ê¹¨ë—ì´, ë‹´ë°±íˆ", category: "ë¶€ì‚¬"},
            {kanji: "ã‚ã¾ã‚Š/ã‚ã‚“ã¾ã‚Š", reading: "ã‚ã¾ã‚Š", meaning: "ë³„ë¡œ, ê·¸ë‹¤ì§€", category: "ë¶€ì‚¬"},
            {kanji: "ã‚ã‚‰ã‚†ã‚‹", reading: "ã‚ã‚‰ã‚†ã‚‹", meaning: "ì˜¨ê°–, ëª¨ë“ ", category: "ë¶€ì‚¬"},
            {kanji: "ã„ã¡ã°ã‚“", reading: "ã„ã¡ã°ã‚“", meaning: "ê°€ì¥, ì œì¼, ìµœê³ ì„", category: "ë¶€ì‚¬"},
            {kanji: "ã„ã¤ã‚‚", reading: "ã„ã¤ã‚‚", meaning: "ì–¸ì œë‚˜, ëŠ˜", category: "ë¶€ì‚¬"},
            {kanji: "ã„ã¾ã«", reading: "ã„ã¾ã«", meaning: "ë¨¸ì§€ì•Šì•„, ê³§", category: "ë¶€ì‚¬"},
            {kanji: "ã„ã‚ˆã„ã‚ˆ", reading: "ã„ã‚ˆã„ã‚ˆ", meaning: "ì ì , ë“œë””ì–´", category: "ë¶€ì‚¬"},
            {kanji: "ã„ã‚‰ã„ã‚‰", reading: "ã„ã‚‰ã„ã‚‰", meaning: "ì•ˆì ˆë¶€ì ˆ", category: "ë¶€ì‚¬"},
            {kanji: "ã„ã‚ã„ã‚", reading: "ã„ã‚ã„ã‚", meaning: "ì—¬ëŸ¬ ê°€ì§€, ë‹¤ì–‘í•œ", category: "ë¶€ì‚¬"},
            
            // ê°€íƒ€ì¹´ë‚˜ì–´
            {kanji: "ã‚¢ã‚¤ãƒ‡ã‚¢", reading: "ã‚¢ã‚¤ãƒ‡ã‚¢", meaning: "ì•„ì´ë””ì–´", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼", reading: "ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼", meaning: "ì•¡ì„¸ì„œë¦¬", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¢ãƒ‰ãƒã‚¤ã‚¹", reading: "ã‚¢ãƒ‰ãƒã‚¤ã‚¹", meaning: "ì–´ë“œë°”ì´ìŠ¤, ì¶©ê³ ", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¢ãƒŠã‚¦ãƒ³ã‚µãƒ¼", reading: "ã‚¢ãƒŠã‚¦ãƒ³ã‚µãƒ¼", meaning: "ì•„ë‚˜ìš´ì„œ", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«", reading: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«", meaning: "ì•Œì½”ì˜¬, ìˆ ", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¢ãƒ«ãƒãƒ ", reading: "ã‚¢ãƒ«ãƒãƒ ", meaning: "ì•¨ë²”", category: "ê°€íƒ€ì¹´ë‚˜"},
        ];

        let currentIndex = 0;
        let filteredWords = [...words];
        let showReading = true;
        let showMeaning = true;
        let currentCategory = 'all';
        let isNavigating = false;
        let longPressTimer = null;
        let isLongPress = false;

        function saveState() {
            const state = { currentIndex, showReading, showMeaning, currentCategory };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        }

        function loadState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const state = JSON.parse(saved);
                currentIndex = state.currentIndex || 0;
                showReading = state.showReading !== undefined ? state.showReading : true;
                showMeaning = state.showMeaning !== undefined ? state.showMeaning : true;
                currentCategory = state.currentCategory || 'all';
                document.getElementById('categorySelect').value = currentCategory;
                if (currentCategory !== 'all') {
                    filteredWords = words.filter(w => w.category === currentCategory);
                }
                if (currentIndex >= filteredWords.length) currentIndex = 0;
                updateToggleButtons();
            }
        }

        function updateToggleButtons() {
            const readingBtn = document.getElementById('toggleReading');
            const meaningBtn = document.getElementById('toggleMeaning');
            readingBtn.className = showReading ? 'toggle-btn active' : 'toggle-btn inactive';
            readingBtn.textContent = showReading ? 'ë°œìŒ í‘œì‹œ' : 'ë°œìŒ ìˆ¨ê¹€';
            meaningBtn.className = showMeaning ? 'toggle-btn active' : 'toggle-btn inactive';
            meaningBtn.textContent = showMeaning ? 'ì •ë‹µ í‘œì‹œ' : 'ì •ë‹µ ìˆ¨ê¹€';
        }

        function updateCard() {
            const word = filteredWords[currentIndex];
            document.getElementById('kanji').textContent = word.kanji;
            document.getElementById('reading').textContent = word.reading;
            document.getElementById('meaning').textContent = word.meaning;
            document.getElementById('categoryTag').textContent = word.category;
            document.getElementById('progress').textContent = `${currentIndex + 1} / ${filteredWords.length}`;
            applyVisibility();
            saveState();
        }

        function applyVisibility() {
            document.getElementById('reading').className = showReading ? 'reading' : 'reading hidden';
            document.getElementById('meaning').className = showMeaning ? 'meaning' : 'meaning hidden';
        }

        function toggleReading() {
            showReading = !showReading;
            updateToggleButtons();
            applyVisibility();
            saveState();
        }

        function toggleMeaning() {
            showMeaning = !showMeaning;
            updateToggleButtons();
            applyVisibility();
            saveState();
        }

        function revealTemporary() {
            document.getElementById('reading').className = 'reading';
            document.getElementById('meaning').className = 'meaning';
        }

        function hideTemporary() {
            applyVisibility();
        }

        function nextCard() {
            if (isNavigating) return;
            isNavigating = true;
            currentIndex = (currentIndex + 1) % filteredWords.length;
            updateCard();
            setTimeout(() => { isNavigating = false; }, 250);
        }

        function prevCard() {
            if (isNavigating) return;
            isNavigating = true;
            currentIndex = (currentIndex - 1 + filteredWords.length) % filteredWords.length;
            updateCard();
            setTimeout(() => { isNavigating = false; }, 250);
        }

        function changeCategory() {
            currentCategory = document.getElementById('categorySelect').value;
            if (currentCategory === 'all') {
                filteredWords = [...words];
            } else {
                filteredWords = words.filter(w => w.category === currentCategory);
            }
            currentIndex = 0;
            updateCard();
        }

        function shuffleCards() {
            for (let i = filteredWords.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [filteredWords[i], filteredWords[j]] = [filteredWords[j], filteredWords[i]];
            }
            currentIndex = 0;
            updateCard();
        }

        function resetOrder() {
            if (currentCategory === 'all') {
                filteredWords = [...words];
            } else {
                filteredWords = words.filter(w => w.category === currentCategory);
            }
            currentIndex = 0;
            updateCard();
        }

        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
            isLongPress = false;
            longPressTimer = setTimeout(() => {
                isLongPress = true;
                revealTemporary();
            }, 300);
        });

        document.addEventListener('touchmove', e => {
            const moveX = Math.abs(e.changedTouches[0].screenX - touchStartX);
            const moveY = Math.abs(e.changedTouches[0].screenY - touchStartY);
            if (moveX > 10 || moveY > 10) {
                clearTimeout(longPressTimer);
            }
        });

        document.addEventListener('touchend', e => {
            clearTimeout(longPressTimer);
            if (isLongPress) {
                hideTemporary();
                isLongPress = false;
                return;
            }
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const diff = touchStartX - touchEndX;
            if (Math.abs(diff) > 80) {
                if (diff > 0) nextCard();
                else prevCard();
            }
        }

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight') nextCard();
            if (e.key === 'ArrowLeft') prevCard();
            if (e.key === ' ') { e.preventDefault(); revealTemporary(); }
        });

        document.addEventListener('keyup', e => {
            if (e.key === ' ') hideTemporary();
        });

        document.addEventListener('DOMContentLoaded', function() {
            loadState();
            updateCard();
        });
    </script>
</body>
</html>
