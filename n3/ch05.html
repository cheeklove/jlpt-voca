<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>N3 ë‹¨ì–´ì¥ Ch.5</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 0; padding: 0; background: #1a1a2e; color: #eee; min-height: 100vh; }
        .container { max-width: 500px; margin: 0 auto; padding: 12px; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap; gap: 8px; }
        h1 { font-size: 1.3rem; margin: 0; color: #fff; }
        .progress { font-size: 0.9rem; color: #888; }
        .controls { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; justify-content: center; }
        .toggle-btn { padding: 8px 14px; border: none; border-radius: 20px; font-size: 0.85rem; cursor: pointer; transition: all 0.2s; }
        .toggle-btn.active { background: #4a5568; color: #fff; }
        .toggle-btn.inactive { background: #2d3748; color: #718096; }
        .toggle-btn.shuffle { background: #805ad5; color: #fff; }
        .toggle-btn.reset { background: #dd6b20; color: #fff; }
        .category-select { width: 100%; padding: 10px; border: none; border-radius: 10px; background: #2d3748; color: #fff; font-size: 0.95rem; margin-bottom: 12px; }
        .card { background: linear-gradient(145deg, #16213e, #1a1a2e); border-radius: 16px; padding: 28px 20px; min-height: 280px; display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: 0 8px 32px rgba(0,0,0,0.3); margin-bottom: 16px; border: 1px solid #2d3748; }
        .kanji { font-family: 'Noto Sans JP', sans-serif; font-size: 3rem; font-weight: bold; color: #fff; margin-bottom: 16px; text-align: center; line-height: 1.3; user-select: text; -webkit-user-select: text; }
        .reading { font-family: 'Noto Sans JP', sans-serif; font-size: 1.4rem; color: #63b3ed; margin-bottom: 20px; text-align: center; user-select: text; -webkit-user-select: text; }
        .meaning { font-size: 1.5rem; color: #68d391; text-align: center; padding: 12px 20px; background: rgba(104, 211, 145, 0.1); border-radius: 10px; }
        .hidden { visibility: hidden; }
        .nav-buttons { display: flex; gap: 12px; justify-content: center; }
        .nav-btn { flex: 1; max-width: 150px; padding: 14px 20px; border: none; border-radius: 12px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .nav-btn.prev { background: #4a5568; color: #fff; }
        .nav-btn.next { background: #4299e1; color: #fff; }
        .nav-btn:active { transform: scale(0.96); }
        .category-tag { font-size: 0.75rem; padding: 4px 10px; background: #4a5568; border-radius: 12px; margin-bottom: 16px; color: #a0aec0; }
        .tap-hint { text-align: center; font-size: 0.8rem; color: #555; margin-top: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../index.html" style="padding:6px 12px;background:#38a169;color:#fff;text-decoration:none;border-radius:8px;font-size:0.85rem;">â† í™ˆ</a>
            <h1>N3 ë‹¨ì–´ì¥ Ch.5</h1>
            <span class="progress" id="progress">1 / 100</span>
        </header>
        <select class="category-select" id="categorySelect" onchange="changeCategory()">
            <option value="all">ì „ì²´</option>
            <option value="ìŒë…ëª…ì‚¬">ìŒë… ëª…ì‚¬</option>
            <option value="í›ˆë…ëª…ì‚¬">í›ˆë… ëª…ì‚¬</option>
            <option value="ë™ì‚¬">ë™ì‚¬</option>
            <option value="ã„í˜•ìš©ì‚¬">ã„í˜•ìš©ì‚¬</option>
            <option value="ãªí˜•ìš©ì‚¬">ãªí˜•ìš©ì‚¬</option>
            <option value="ë¶€ì‚¬">ë¶€ì‚¬ ë° ê¸°íƒ€</option>
            <option value="ê°€íƒ€ì¹´ë‚˜">ê°€íƒ€ì¹´ë‚˜ì–´</option>
        </select>
        <div class="card" id="card">
            <span class="category-tag" id="categoryTag">ëª…ì‚¬</span>
            <div class="kanji" id="kanji">æ¼¢å­—</div>
            <div class="reading" id="reading">ã‹ã‚“ã˜</div>
            <div class="meaning" id="meaning">í•œì</div>
        </div>
        <div class="controls">
            <button class="toggle-btn reset" onclick="resetOrder()">â†º ì´ˆê¸°í™”</button>
            <button class="toggle-btn shuffle" onclick="shuffleCards()">ğŸ”€ ì…”í”Œ</button>
            <button class="toggle-btn active" id="toggleReading" onclick="toggleReading()">ë°œìŒ í‘œì‹œ</button>
            <button class="toggle-btn active" id="toggleMeaning" onclick="toggleMeaning()">ì •ë‹µ í‘œì‹œ</button>
        </div>
        <div class="nav-buttons">
            <button class="nav-btn prev" onclick="prevCard()">â—€ ì´ì „</button>
            <button class="nav-btn next" onclick="nextCard()">ë‹¤ìŒ â–¶</button>
        </div>
        <p class="tap-hint">ì¹´ë“œë¥¼ ê¸¸ê²Œ ëˆ„ë¥´ë©´ ì •ë‹µ í‘œì‹œ</p>
    </div>
    <script>
        const STORAGE_KEY = 'n3_ch05_state';
        const words = [
            // ìŒë… ëª…ì‚¬
            {kanji: "æŒ‡ç¤º", reading: "ã—ã˜", meaning: "ì§€ì‹œ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è¾æ›¸", reading: "ã˜ã—ã‚‡", meaning: "ì‚¬ì „", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "äº‹æƒ…", reading: "ã˜ã˜ã‚‡ã†", meaning: "ì‚¬ì •", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è‡ªä¿¡", reading: "ã˜ã—ã‚“", meaning: "ìì‹ ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è‡ªèº«", reading: "ã˜ã—ã‚“", meaning: "ìì‹ , ìê¸°", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "åœ°éœ‡", reading: "ã˜ã—ã‚“", meaning: "ì§€ì§„", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å§¿å‹¢", reading: "ã—ã›ã„", meaning: "ìì„¸", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è‡ªç„¶", reading: "ã—ãœã‚“", meaning: "ìì—°", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ™‚ä»£", reading: "ã˜ã ã„", meaning: "ì‹œëŒ€", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å¤±æ¥­", reading: "ã—ã¤ãã‚‡ã†", meaning: "ì‹¤ì—…", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å¤±æ•—", reading: "ã—ã£ã±ã„", meaning: "ì‹¤íŒ¨", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è³ªå•", reading: "ã—ã¤ã‚‚ã‚“", meaning: "ì§ˆë¬¸", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å®ŸåŠ›", reading: "ã˜ã¤ã‚Šã‚‡ã", meaning: "ì‹¤ë ¥", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è¾å…¸", reading: "ã˜ã¦ã‚“", meaning: "ì‚¬ì „", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è‡ªè»¢è»Š", reading: "ã˜ã¦ã‚“ã—ã‚ƒ", meaning: "ìì „ê±°", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è‡ªå‹•è»Š", reading: "ã˜ã©ã†ã—ã‚ƒ", meaning: "ìë™ì°¨", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å¸‚æ°‘", reading: "ã—ã¿ã‚“", meaning: "ì‹œë¯¼", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ç¤¾ä¼š", reading: "ã—ã‚ƒã‹ã„", meaning: "ì‚¬íšŒ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å†™çœŸ", reading: "ã—ã‚ƒã—ã‚“", meaning: "ì‚¬ì§„", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å†™çœŸå®¶", reading: "ã—ã‚ƒã—ã‚“ã‹", meaning: "ì‚¬ì§„ê°€", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ç¤¾é•·", reading: "ã—ã‚ƒã¡ã‚‡ã†", meaning: "ì‚¬ì¥", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é‚ªé­”", reading: "ã˜ã‚ƒã¾", meaning: "ë°©í•´", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ç¿’æ…£", reading: "ã—ã‚…ã†ã‹ã‚“", meaning: "ìŠµê´€", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä½æ‰€", reading: "ã˜ã‚…ã†ã—ã‚‡", meaning: "ì£¼ì†Œ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ¸‹æ»", reading: "ã˜ã‚…ã†ãŸã„", meaning: "ì •ì²´", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é›†ä¸­", reading: "ã—ã‚…ã†ã¡ã‚…ã†", meaning: "ì§‘ì¤‘", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ä¿®ç†", reading: "ã—ã‚…ã†ã‚Š", meaning: "ìˆ˜ë¦¬", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æˆæ¥­", reading: "ã˜ã‚…ãã‚‡ã†", meaning: "ìˆ˜ì—…", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å®¿é¡Œ", reading: "ã—ã‚…ãã ã„", meaning: "ìˆ™ì œ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å®¿æ³Š", reading: "ã—ã‚…ãã¯ã", meaning: "ìˆ™ë°•", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ‰‹è¡“", reading: "ã—ã‚…ã˜ã‚…ã¤", meaning: "ìˆ˜ìˆ ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å‡ºå¸­", reading: "ã—ã‚…ã£ã›ã", meaning: "ì¶œì„", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å‡ºå¼µ", reading: "ã—ã‚…ã£ã¡ã‚‡ã†", meaning: "ì¶œì¥", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å‡ºç™º", reading: "ã—ã‚…ã£ã±ã¤", meaning: "ì¶œë°œ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é¦–éƒ½", reading: "ã—ã‚…ã¨", meaning: "ìˆ˜ë„", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å¯¿å‘½", reading: "ã˜ã‚…ã¿ã‚‡ã†", meaning: "ìˆ˜ëª…", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ç´¹ä»‹", reading: "ã—ã‚‡ã†ã‹ã„", meaning: "ì†Œê°œ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ­£æœˆ", reading: "ã—ã‚‡ã†ãŒã¤", meaning: "ì •ì›”, ì„¤ë‚ ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å°å­¦æ ¡", reading: "ã—ã‚‡ã†ãŒã£ã“ã†", meaning: "ì´ˆë“±í•™êµ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å•†æ¥­", reading: "ã—ã‚‡ã†ãã‚‡ã†", meaning: "ìƒì—…", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å°èª¬", reading: "ã—ã‚‡ã†ã›ã¤", meaning: "ì†Œì„¤", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ‹›å¾…", reading: "ã—ã‚‡ã†ãŸã„", meaning: "ì´ˆëŒ€", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ‰¿çŸ¥", reading: "ã—ã‚‡ã†ã¡", meaning: "ì•, ìŠ¹ë‚™", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ¶ˆè²»", reading: "ã—ã‚‡ã†ã²", meaning: "ì†Œë¹„", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å•†å“", reading: "ã—ã‚‡ã†ã²ã‚“", meaning: "ìƒí’ˆ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å°†æ¥", reading: "ã—ã‚‡ã†ã‚‰ã„", meaning: "ì¥ë˜", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "çœç•¥", reading: "ã—ã‚‡ã†ã‚Šã‚ƒã", meaning: "ìƒëµ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é£Ÿå ‚", reading: "ã—ã‚‡ãã©ã†", meaning: "ì‹ë‹¹", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ¤ç‰©", reading: "ã—ã‚‡ãã¶ã¤", meaning: "ì‹ë¬¼", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é£Ÿæ–™å“", reading: "ã—ã‚‡ãã‚Šã‚‡ã†ã²ã‚“", meaning: "ì‹ë£Œí’ˆ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å‡¦ç†", reading: "ã—ã‚‡ã‚Š", meaning: "ì²˜ë¦¬", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "è³‡æ–™", reading: "ã—ã‚Šã‚‡ã†", meaning: "ìë£Œ", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "é€²å­¦", reading: "ã—ã‚“ãŒã", meaning: "ì§„í•™", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "äººå£", reading: "ã˜ã‚“ã“ã†", meaning: "ì¸êµ¬", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "ç”³è«‹", reading: "ã—ã‚“ã›ã„", meaning: "ì‹ ì²­", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "èº«é•·", reading: "ã—ã‚“ã¡ã‚‡ã†", meaning: "ì‹ ì¥, í‚¤", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "å¿ƒé…", reading: "ã—ã‚“ã±ã„", meaning: "ê±±ì •", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ–°è", reading: "ã—ã‚“ã¶ã‚“", meaning: "ì‹ ë¬¸", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "æ–°èç¤¾", reading: "ã—ã‚“ã¶ã‚“ã—ã‚ƒ", meaning: "ì‹ ë¬¸ì‚¬", category: "ìŒë…ëª…ì‚¬"},
            {kanji: "äººé¡", reading: "ã˜ã‚“ã‚‹ã„", meaning: "ì¸ë¥˜", category: "ìŒë…ëª…ì‚¬"},
            
            // í›ˆë… ëª…ì‚¬
            {kanji: "æ”¯åº¦", reading: "ã—ãŸã", meaning: "ì±„ë¹„, ì¤€ë¹„", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å“ç‰©", reading: "ã—ãªã‚‚ã®", meaning: "ë¬¼í’ˆ", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å­—å¼•", reading: "ã˜ã³ã", meaning: "ì‚¬ì „", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "å³¶", reading: "ã—ã¾", meaning: "ì„¬", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "æŸ“ã¿", reading: "ã—ã¿", meaning: "ì–¼ë£©", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "ç· ã‚åˆ‡ã‚Š", reading: "ã—ã‚ãã‚Š", meaning: "ë§ˆê°", category: "í›ˆë…ëª…ì‚¬"},
            {kanji: "è·å ´", reading: "ã—ã‚‡ãã°", meaning: "ì§ì¥", category: "í›ˆë…ëª…ì‚¬"},
            
            // ë™ì‚¬
            {kanji: "æ¢ã™", reading: "ã•ãŒã™", meaning: "ì°¾ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å’²ã", reading: "ã•ã", meaning: "(ê½ƒì´) í”¼ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å«ã¶", reading: "ã•ã‘ã¶", meaning: "ì™¸ì¹˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "åˆºã™", reading: "ã•ã™", meaning: "ì°Œë¥´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å·®ã™", reading: "ã•ã™", meaning: "(ìš°ì‚°ì„) ì“°ë‹¤", category: "ë™ì‚¬"},
            {kanji: "é¨’ã", reading: "ã•ã‚ã", meaning: "ë– ë“¤ë‹¤", category: "ë™ì‚¬"},
            {kanji: "è§¦ã‚‹", reading: "ã•ã‚ã‚‹", meaning: "ë§Œì§€ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å±ã‚‹", reading: "ã—ã‹ã‚‹", meaning: "í˜¼ë‚´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ²ˆã‚€", reading: "ã—ãšã‚€", meaning: "ê°€ë¼ì•‰ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ­»ã¬", reading: "ã—ã¬", meaning: "ì£½ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ã—ã³ã‚Œã‚‹", reading: "ã—ã³ã‚Œã‚‹", meaning: "ì €ë¦¬ë‹¤", category: "ë™ì‚¬"},
            {kanji: "çµã‚‹", reading: "ã—ã¼ã‚‹", meaning: "ì§œë‹¤, ì¡°ì´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "é–‰ã¾ã‚‹", reading: "ã—ã¾ã‚‹", meaning: "ë‹«íˆë‹¤", category: "ë™ì‚¬"},
            {kanji: "é–‰ã‚ã‚‹", reading: "ã—ã‚ã‚‹", meaning: "ë‹«ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å ã‚ã‚‹", reading: "ã—ã‚ã‚‹", meaning: "ì°¨ì§€í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ã—ã‚ƒã¹ã‚‹", reading: "ã—ã‚ƒã¹ã‚‹", meaning: "ë§í•˜ë‹¤, ì´ì•¼ê¸°í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "èª¿ã¹ã‚‹", reading: "ã—ã‚‰ã¹ã‚‹", meaning: "ì¡°ì‚¬í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "çŸ¥ã‚‹", reading: "ã—ã‚‹", meaning: "ì•Œë‹¤", category: "ë™ì‚¬"},
            {kanji: "ä¿¡ã˜ã‚‹", reading: "ã—ã‚“ã˜ã‚‹", meaning: "ë¯¿ë‹¤", category: "ë™ì‚¬"},
            {kanji: "å¸ã†", reading: "ã™ã†", meaning: "ë“¤ì´ë§ˆì‹œë‹¤", category: "ë™ì‚¬"},
            {kanji: "éãã‚‹", reading: "ã™ãã‚‹", meaning: "ì§€ë‚˜ê°€ë‹¤, ì§€ë‚˜ì¹˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ã™ãã‚Œã‚‹", reading: "ã™ãã‚Œã‚‹", meaning: "ë›°ì–´ë‚˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "é€²ã‚€", reading: "ã™ã™ã‚€", meaning: "ë‚˜ì•„ê°€ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ¨ã¦ã‚‹", reading: "ã™ã¦ã‚‹", meaning: "ë²„ë¦¬ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ»‘ã‚‹", reading: "ã™ã¹ã‚‹", meaning: "ë¯¸ë„ëŸ¬ì§€ë‹¤", category: "ë™ì‚¬"},
            {kanji: "ä½ã‚€", reading: "ã™ã‚€", meaning: "ì‚´ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ¸ˆã‚€", reading: "ã™ã‚€", meaning: "ëë‚˜ë‹¤, ì™„ë£Œë˜ë‹¤, í•´ê²°ë˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "åº§ã‚‹", reading: "ã™ã‚ã‚‹", meaning: "ì•‰ë‹¤", category: "ë™ì‚¬"},
            {kanji: "æ¥ã™ã‚‹", reading: "ã›ã£ã™ã‚‹", meaning: "ì ‘í•˜ë‹¤", category: "ë™ì‚¬"},
            {kanji: "è‚²ã¤", reading: "ãã ã¤", meaning: "ìë¼ë‹¤", category: "ë™ì‚¬"},
            {kanji: "è‚²ã¦ã‚‹", reading: "ãã ã¦ã‚‹", meaning: "ì–‘ìœ¡í•˜ë‹¤, í‚¤ìš°ë‹¤", category: "ë™ì‚¬"},
            
            // ã„í˜•ìš©ì‚¬
            {kanji: "é™ºã—ã„", reading: "ã‘ã‚ã—ã„", meaning: "í—˜í•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æ¿ƒã„", reading: "ã“ã„", meaning: "ì§„í•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æ‹ã—ã„", reading: "ã“ã„ã—ã„", meaning: "ê·¸ë¦½ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "ç´°ã‹ã„", reading: "ã“ã¾ã‹ã„", meaning: "ì˜ë‹¤, ìƒì„¸í•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æ€–ã„", reading: "ã“ã‚ã„", meaning: "ë¬´ì„­ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "å¯‚ã—ã„", reading: "ã•ã³ã—ã„", meaning: "ì™¸ë¡­ë‹¤, ì“¸ì“¸í•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "å¯’ã„", reading: "ã•ã‚€ã„", meaning: "ì¶¥ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "è¦ªã—ã„", reading: "ã—ãŸã—ã„", meaning: "ì¹œí•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "ç™½ã„", reading: "ã—ã‚ã„", meaning: "í¬ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "å°‘ãªã„", reading: "ã™ããªã„", meaning: "ì ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "ã™ã”ã„", reading: "ã™ã”ã„", meaning: "ì—„ì²­ë‚˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            {kanji: "æ¶¼ã—ã„", reading: "ã™ãšã—ã„", meaning: "ì‹œì›í•˜ë‹¤", category: "ã„í˜•ìš©ì‚¬"},
            
            // ãªí˜•ìš©ì‚¬
            {kanji: "è‡ªç”±ã ", reading: "ã˜ã‚†ã†ã ", meaning: "ììœ ë¡­ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "ååˆ†ã ", reading: "ã˜ã‚…ã†ã¶ã‚“ã ", meaning: "ì¶©ë¶„í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "é‡è¦ã ", reading: "ã˜ã‚…ã†ã‚ˆã†ã ", meaning: "ì¤‘ìš”í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "ä¸»è¦ã ", reading: "ã—ã‚…ã‚ˆã†ã ", meaning: "ì£¼ìš”í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "ä¸Šæ‰‹ã ", reading: "ã˜ã‚‡ã†ãšã ", meaning: "ì˜í•˜ë‹¤, ëŠ¥ìˆ™í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "ä¸ˆå¤«ã ", reading: "ã˜ã‚‡ã†ã¶ã ", meaning: "íŠ¼íŠ¼í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "çœŸå‰£ã ", reading: "ã—ã‚“ã‘ã‚“ã ", meaning: "ì§„ì§€í•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            {kanji: "è¦ªåˆ‡ã ", reading: "ã—ã‚“ã›ã¤ã ", meaning: "ì¹œì ˆí•˜ë‹¤", category: "ãªí˜•ìš©ì‚¬"},
            
            // ë¶€ì‚¬ ë° ê¸°íƒ€
            {kanji: "å¤§ä½“", reading: "ã ã„ãŸã„", meaning: "ëŒ€ê°œ, ëŒ€ì²´ë¡œ", category: "ë¶€ì‚¬"},
            {kanji: "ãŸã„ã¦ã„", reading: "ãŸã„ã¦ã„", meaning: "ëŒ€ê°•, ëŒ€ë¶€ë¶„, ëŒ€ì²´ë¡œ", category: "ë¶€ì‚¬"},
            {kanji: "ã ã„ã¶", reading: "ã ã„ã¶", meaning: "ê½¤, ìƒë‹¹íˆ", category: "ë¶€ì‚¬"},
            {kanji: "ãŸã„ã¸ã‚“", reading: "ãŸã„ã¸ã‚“", meaning: "ë§¤ìš°, ëŒ€ë‹¨íˆ", category: "ë¶€ì‚¬"},
            {kanji: "ãŸãã•ã‚“", reading: "ãŸãã•ã‚“", meaning: "ë§ì´", category: "ë¶€ì‚¬"},
            {kanji: "å¤šå°‘", reading: "ãŸã—ã‚‡ã†", meaning: "ë‹¤ì†Œ, ì•½ê°„", category: "ë¶€ì‚¬"},
            {kanji: "ãŸã£ã·ã‚Š", reading: "ãŸã£ã·ã‚Š", meaning: "ë“¬ë¿, ì¶©ë¶„íˆ", category: "ë¶€ì‚¬"},
            {kanji: "ãŸã³ãŸã³", reading: "ãŸã³ãŸã³", meaning: "ìì£¼", category: "ë¶€ì‚¬"},
            {kanji: "ãŸã¶ã‚“", reading: "ãŸã¶ã‚“", meaning: "ì•„ë§ˆ", category: "ë¶€ì‚¬"},
            {kanji: "ãŸã¾ãŸã¾", reading: "ãŸã¾ãŸã¾", meaning: "ë§ˆì¹¨, ê°„í˜¹", category: "ë¶€ì‚¬"},
            {kanji: "ã ã‚“ã ã‚“", reading: "ã ã‚“ã ã‚“", meaning: "ì ì ", category: "ë¶€ì‚¬"},
            
            // ê°€íƒ€ì¹´ë‚˜ì–´
            {kanji: "ã‚¹ã‚¤ãƒƒãƒ", reading: "ã‚¹ã‚¤ãƒƒãƒ", meaning: "ìŠ¤ìœ„ì¹˜", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ãƒ¼ãƒ„", reading: "ã‚¹ãƒ¼ãƒ„", meaning: "ìŠˆíŠ¸, ì–‘ë³µ", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ãƒ¼ãƒ„ã‚±ãƒ¼ã‚¹", reading: "ã‚¹ãƒ¼ãƒ„ã‚±ãƒ¼ã‚¹", meaning: "ìŠˆíŠ¸ ì¼€ì´ìŠ¤", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ãƒ¼ãƒ‘ãƒ¼", reading: "ã‚¹ãƒ¼ãƒ‘ãƒ¼", meaning: "ìŠˆí¼ë§ˆì¼“", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ã‚«ãƒ¼ãƒˆ", reading: "ã‚¹ã‚«ãƒ¼ãƒˆ", meaning: "ìŠ¤ì»¤íŠ¸, ì¹˜ë§ˆ", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ã‚¯ãƒªãƒ¼ãƒ³", reading: "ã‚¹ã‚¯ãƒªãƒ¼ãƒ³", meaning: "ìŠ¤í¬ë¦°", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«", reading: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«", meaning: "ìŠ¤ì¼€ì¤„, ì¼ì •, ê³„íš", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ãƒ†ãƒ¼ã‚­", reading: "ã‚¹ãƒ†ãƒ¼ã‚­", meaning: "ìŠ¤í…Œì´í¬", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ãƒ†ãƒ¬ã‚ª", reading: "ã‚¹ãƒ†ãƒ¬ã‚ª", meaning: "ìŠ¤í…Œë ˆì˜¤", category: "ê°€íƒ€ì¹´ë‚˜"},
            {kanji: "ã‚¹ãƒˆãƒ¼ãƒ–", reading: "ã‚¹ãƒˆãƒ¼ãƒ–", meaning: "ìŠ¤í† ë¸Œ", category: "ê°€íƒ€ì¹´ë‚˜"},
        ];

        let currentIndex = 0;
        let filteredWords = [...words];
        let showReading = true;
        let showMeaning = true;
        let currentCategory = 'all';
        let isNavigating = false;
        let longPressTimer = null;
        let isLongPress = false;

        function saveState() {
            const state = { currentIndex, showReading, showMeaning, currentCategory };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        }

        function loadState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const state = JSON.parse(saved);
                currentIndex = state.currentIndex || 0;
                showReading = state.showReading !== undefined ? state.showReading : true;
                showMeaning = state.showMeaning !== undefined ? state.showMeaning : true;
                currentCategory = state.currentCategory || 'all';
                document.getElementById('categorySelect').value = currentCategory;
                if (currentCategory !== 'all') {
                    filteredWords = words.filter(w => w.category === currentCategory);
                }
                if (currentIndex >= filteredWords.length) currentIndex = 0;
                updateToggleButtons();
            }
        }

        function updateToggleButtons() {
            const readingBtn = document.getElementById('toggleReading');
            const meaningBtn = document.getElementById('toggleMeaning');
            readingBtn.className = showReading ? 'toggle-btn active' : 'toggle-btn inactive';
            readingBtn.textContent = showReading ? 'ë°œìŒ í‘œì‹œ' : 'ë°œìŒ ìˆ¨ê¹€';
            meaningBtn.className = showMeaning ? 'toggle-btn active' : 'toggle-btn inactive';
            meaningBtn.textContent = showMeaning ? 'ì •ë‹µ í‘œì‹œ' : 'ì •ë‹µ ìˆ¨ê¹€';
        }

        function updateCard() {
            const word = filteredWords[currentIndex];
            document.getElementById('kanji').textContent = word.kanji;
            document.getElementById('reading').textContent = word.reading;
            document.getElementById('meaning').textContent = word.meaning;
            document.getElementById('categoryTag').textContent = word.category;
            document.getElementById('progress').textContent = `${currentIndex + 1} / ${filteredWords.length}`;
            applyVisibility();
            saveState();
        }

        function applyVisibility() {
            document.getElementById('reading').className = showReading ? 'reading' : 'reading hidden';
            document.getElementById('meaning').className = showMeaning ? 'meaning' : 'meaning hidden';
        }

        function toggleReading() {
            showReading = !showReading;
            updateToggleButtons();
            applyVisibility();
            saveState();
        }

        function toggleMeaning() {
            showMeaning = !showMeaning;
            updateToggleButtons();
            applyVisibility();
            saveState();
        }

        function revealTemporary() {
            document.getElementById('reading').className = 'reading';
            document.getElementById('meaning').className = 'meaning';
        }

        function hideTemporary() {
            applyVisibility();
        }

        function nextCard() {
            if (isNavigating) return;
            isNavigating = true;
            currentIndex = (currentIndex + 1) % filteredWords.length;
            updateCard();
            setTimeout(() => { isNavigating = false; }, 250);
        }

        function prevCard() {
            if (isNavigating) return;
            isNavigating = true;
            currentIndex = (currentIndex - 1 + filteredWords.length) % filteredWords.length;
            updateCard();
            setTimeout(() => { isNavigating = false; }, 250);
        }

        function changeCategory() {
            currentCategory = document.getElementById('categorySelect').value;
            if (currentCategory === 'all') {
                filteredWords = [...words];
            } else {
                filteredWords = words.filter(w => w.category === currentCategory);
            }
            currentIndex = 0;
            updateCard();
        }

        function shuffleCards() {
            for (let i = filteredWords.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [filteredWords[i], filteredWords[j]] = [filteredWords[j], filteredWords[i]];
            }
            currentIndex = 0;
            updateCard();
        }

        function resetOrder() {
            if (currentCategory === 'all') {
                filteredWords = [...words];
            } else {
                filteredWords = words.filter(w => w.category === currentCategory);
            }
            currentIndex = 0;
            updateCard();
        }

        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        const card = document.getElementById('card');

        card.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
            isLongPress = false;
            longPressTimer = setTimeout(() => {
                isLongPress = true;
                revealTemporary();
            }, 300);
        });

        card.addEventListener('touchmove', e => {
            const moveX = Math.abs(e.changedTouches[0].screenX - touchStartX);
            const moveY = Math.abs(e.changedTouches[0].screenY - touchStartY);
            if (moveX > 10 || moveY > 10) {
                clearTimeout(longPressTimer);
            }
        });

        card.addEventListener('touchend', e => {
            clearTimeout(longPressTimer);
            if (isLongPress) {
                hideTemporary();
                isLongPress = false;
                return;
            }
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const diff = touchStartX - touchEndX;
            if (Math.abs(diff) > 80) {
                if (diff > 0) nextCard();
                else prevCard();
            }
        }

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight') nextCard();
            if (e.key === 'ArrowLeft') prevCard();
            if (e.key === ' ') { e.preventDefault(); revealTemporary(); }
        });

        document.addEventListener('keyup', e => {
            if (e.key === ' ') hideTemporary();
        });

        document.addEventListener('DOMContentLoaded', function() {
            loadState();
            updateCard();
        });
    </script>
</body>
</html>
